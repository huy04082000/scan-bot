{% extends 'base.html' %}
{% block title %}In Thông Tin Sản Phẩm{% endblock %}
{% block header_title %}<i class="fas fa-print me-2"></i>In Thông Tin Sản Phẩm{% endblock %}
{% block content %}
<div class="container my-4">
  <div class="card print-card">
    <div class="card-header d-print-none d-flex justify-content-between align-items-center">
      <h5><i class="fas fa-print me-2"></i>Trang In</h5>
      <div class="btn-group">
        <button onclick="window.print();" class="btn btn-primary"><i class="fas fa-print me-2"></i>In Ngay</button>
        <a href="{{ url_for('product_detail', product_id=product.id) }}" class="btn btn-light ms-2"><i class="fas fa-arrow-left me-2"></i>Quay Lại</a>
      </div>
    </div>
    <div class="card-body p-0">
      <div class="print-area p-4">
        <div class="company-header d-flex align-items-center mb-4">
          <div class="company-logo me-3">
            <img src="{{ url_for('static', filename='logo.png') }}" alt="Logo" style="max-height:80px;">
          </div>
          <div class="company-info">
            <h4 class="company-name">Enterprise Management</h4>
            <p class="company-address">123 Đường ABC, Quận XYZ, TP. HCM</p>
          </div>
        </div>
        <div class="product-info mb-4">
          <h5 class="text-center">THÔNG TIN SẢN PHẨM</h5>
          <p class="text-center"><strong>Mã SP:</strong> {{ product.product_code }}</p>
          <div class="row">
            <div class="col-md-6">
              <p><strong>Tên Sản Phẩm:</strong> {{ product.product_name }}</p>
              <p><strong>Số Seri:</strong> {{ product.serial_number }}</p>
            </div>
            <div class="col-md-6">
              <p><strong>Ngày Nhập:</strong> {{ product.date_entry.strftime("%d/%m/%Y %H:%M") }}</p>
              <p><strong>Ngày Cấp:</strong> {{ product.date_issue.strftime("%d/%m/%Y") }}</p>
            </div>
          </div>
          <p><strong>Bộ Phận:</strong> {{ product.department }}</p>
          <p>
            <strong>Tình Trạng:</strong>
            {% if product.status == 'chạy tốt' %}
              Hoạt Động Tốt
            {% elif product.status == 'đang sửa' %}
              Đang Sửa Chữa
            {% else %}
              Đang Hỏng
            {% endif %}
          </p>
        </div>
        <div class="qr-container text-center mb-4">
          <img src="{{ url_for('get_qr', product_id=product.id) }}" alt="QR Code" class="img-fluid" style="max-width:200px;">
        </div>
        <div class="additional-info">
          <p><strong>Người Nhập:</strong> {% if product.entered_by_user %}{{ product.entered_by_user.full_name }}{% else %}---{% endif %}</p>
          <p><strong>Ngày In:</strong> {{ now.strftime("%d/%m/%Y %H:%M") }}</p>
        </div>
        <div class="print-footer text-center mt-4">
          <p>Document generated by Enterprise Management System</p>
          <p>Page 1 of 1</p>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
